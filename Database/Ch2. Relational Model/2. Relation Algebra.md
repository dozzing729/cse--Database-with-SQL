# 2. Relation Algebra

원하는 데이터를 얻기 위해 하나 혹은 두개의 relation에 필요한 쿼리를 수행해 새로운 relation을 return하는 연산.

DB systemd의 구성 요소 중 데이터 언어의 역할을 하며, 관계 대수/ 관계 해석을 나눌 수 있다.

- 관계 대수(Relation Algebra): 절차식 언어, 원하는 결과를 얻기 위해 데이터의 처리 과정을 순서대로 기술한다.
- 관계 해석(Relation Calculus): 비절차식 언어ㅏ, 원하는 결과를 얻기 위해 처리를 원하는 데이터 무엇인지만 기술한다.

<img width="626" alt="스크린샷 2021-04-01 오후 3 57 34" src="https://user-images.githubusercontent.com/61934702/113255689-14ea0c80-9303-11eb-9cfb-351a35107d3e.png" width="60%">
-> Hierarchy of Relational Data Operation


## 1. Select Operation

- Notation: σ_(특정 조건) (대상 relation)
- 특정 조건을 만족하는 tuple만 select하여 출력한다.
- 예시: instructor relation에서 dept_name 속성이 "Physics"인 강사만 선택
  - query: σ(dept_name = "Physics")(instructor)
  - result: ![IMG_15AC788340BB-1](https://user-images.githubusercontent.com/61934702/113256676-7b235f00-9304-11eb-840c-4ed6f3b8b395.jpeg)


## 2. Project Opertaion

- Notation: 파이(속성1, 속성2, ..., 속성K)(대상 relation)
- 단항 연산자로, 특정 속성들 만으로 구성된 relation을 return한다.
  relation은 집합이기 때문에 중복된 row들은 삭제된채 출력된다.
- 예시: instructor relation에서 dept_name 속성만 제거된 결과를 출력
  - query: 파이(ID, name, salary)(instructor)
  - result: ![IMG_9D72E50A46FE-1](https://user-images.githubusercontent.com/61934702/113257414-8b880980-9305-11eb-94e4-1014935a5c66.jpeg)


## 3. Cartesian-Product Operation

- Notation: (relation1) X (relation2)
- 2개의 relation으로 만들 수 있는 모든 tuple들의 조합을 return한다.
- 예시: 강사와 강의들의 모든 조합을 출력하고자 할 때
  - query: 
  
    instructor x teaches
    
  - result: 
  
    ![IMG_D5BC95FFAF11-1](https://user-images.githubusercontent.com/61934702/113257792-10732300-9306-11eb-83db-d99ce146ce42.jpeg)


## 4. Join Operation

- Notation: r1 나비(조건) r2 = 시그마(조건)(r X s)
- 보통 product 연산은 모든 조합을 return하기 때문에 의미 없는 tuple들도 결과에 포함되는데, join연산을 이용하면 product된 결과 중 특정 조건을 만족하는 tuple들만 얻어낼 수 있다.
  즉, select 연산과 product 연산을 같이 수행한 연산이기 때문에 select 연산과 product 연산만으로도 표현할 수 있다.
- 예시: 각 강사들이 강의하는 모든 강의 정보를 보고자 할 때
  - query: 
    
    instructor 나비(instructor.id = teaches.id) teaches
  
    시그마(instructor.id = teaches.id)(instructor x teaches)
     
  - result:

    ![IMG_8CB05DC08908-1](https://user-images.githubusercontent.com/61934702/113258937-888e1880-9307-11eb-832e-981574817bea.jpeg)
    
    Cartesian product 결과에서 강사와 강의의 id가 같은 tuple들만 출력된 것을 확인할 수 있ㄷ.
    

## 5. Set Operation

### Union Operation

- Notation: (r1) 합 (r2)

- relation1 과 relation2를 합한 새로운 relation을 return한다. 

  product 연산처럼 두 relation을 가로로 합쳐 모든 조합을 내는게 아니라, 세로로 합친다. 그렇기 때문에 다음과 같은 조건을 만족해야만 연산이 가능하다.
  
  1) r1과 r2는 반드시 속성의 개수 같아야 한다.
  2) 각 속성의 domain을 서로 비교할 수 있어야 한다. (ex: 정수와 정수는 비교 가능하지만 정수와 문자열은 비교 불가능)

- 예시: 2017년 가을에 열린 강의와, 2018년 봄에 열린 모든 강의의 id를 얻고자 할 때

  - query: 
   
    파이(course_id)(시그마(semester="Fall" ^ year="2017")(section)) 합 파이(course_id)(시그마(semester="Spring" ^ year="2018")(section))
    
  - result:

    ![IMG_21179C6884C7-1](https://user-images.githubusercontent.com/61934702/113260483-482f9a00-9309-11eb-9cdc-87ce7e34d747.jpeg)
    
    두 relation이 세로로 합쳐졌음을 확인할 수 있다.
    
    
### Intersection Operation

- Notation: (r1) 교집합 (r2)

- 두 relation에서 공통으로 갖고 있는 tuple들만을 return한다. union 연산과 같은 두 조건을 만족할 때만 연산을 수행할 수 있다.

### Difference Operation

- Notation: (r1) - (r2)

- r1에는 존재하지만 r2에는 존재하지 않는 tuple들만을 return한다.


## 6. Assignment Operation

- Notation: (r1) <- (r2)

- r1에 r2를 대입하는 연산자로, 보통 연산 결과를 저장하기 위해 사용한다.


## 7. Rename Operation

- Notation: p(새 이름)(relation)

- relation의 이름을 지정해 주는 연산으로, 보통 연산 결과에 새로운 이름을 붙여주기 위해 사용된다.

  p(새이름(속성1, 속성2,..))(relation) 처럼 작성하면 속성들의 이름도 새로 붙여줄 수 있다.
  







